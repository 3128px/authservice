### Configuration Options


##### message `Config` (config/config.proto)

| Field | Description | Type |
| ----- | ----------- | ---- |
| chains | chains represents one of more processing chains for incoming requests. A chain is selected based on the first matched. Order of chain declaration is therefore important. | (slice of) FilterChain |
| listen_address | listen_address describes the address for the authservice to listen for incoming requests to process. | string |
| listen_port | listen_port describes the port for the authservice to listen for incoming requests to process. | int32 |
| log_level | log_level describes the verbosity of logs generated by the authservice. | string |



##### message `Endpoint` (config/common/config.proto)

an `Endpoint` represents a URI definition.

| Field | Description | Type |
| ----- | ----------- | ---- |
| scheme | the URI scheme. Must be set to `https`. | string |
| hostname | the URL hostname. | string |
| port | the URL port. | int32 |
| path | the URL path. Must begin with a forward slash `/`. | string |



##### message `Filter` (config/config.proto)

Filter represents a filter-specific configuration.

| Field | Description | Type |
| ----- | ----------- | ---- |
| type |  | oneof |
| (validate.required) |  | option |
| oidc | oidc the OpenID Connect filter configuration. | oidc.OIDCConfig |



##### message `FilterChain` (config/config.proto)

FilterChain represents a chain of 1 or more filters that will sequentially process an HTTP request.

| Field | Description | Type |
| ----- | ----------- | ---- |
| name | name is a user-defined identifier for the processing chain used in logging messages. | string |
| match | match describes a rule to determine whether an HTTP request should be processed by the filter chain. If not defined the FilterChain will always be selected to process a request. | Match |
| filters | filter describes the configuration of one of more filters in the filter chain. | (slice of) Filter |



##### message `Match` (config/config.proto)

Match specifies how a request can be matched to a filter chain.

| Field | Description | Type |
| ----- | ----------- | ---- |
| header | header specifies the http header used to match against. | string |
| criteria |  | oneof |
| (validate.required) |  | option |
| prefix | prefix specifies the prefix of the header value upon which to match against. | string |
| equality | equality specifies the absolute value of a header value upon which to match against. | string |



##### message `OIDCConfig` (config/oidc/config.proto)

OIDCConfig defines the configuration of an OpenID Connect filter that can be used to retrieve identity and access tokens via the standard Code Grant flow from an IdP. Retrieved tokens are encrypted and placed in cookies for use in identifying callers in subsequent requests.

| Field | Description | Type |
| ----- | ----------- | ---- |
| authorization | the IdP's authorization endpoint. | common.Endpoint |
| token | the IdP's token endpoint. | common.Endpoint |
| jwks_config | the IdP's JWKS configuration. | oneof |
| (validate.required) |  | option |
| jwks_uri |  | common.Endpoint |
| jwks |  | string |
| callback | this value will be used as the `redirect_uri` param of the Authorization Code Grant Authentication Request. You must add this URL to the Redirection URI values for the Client pre-registered at the OIDC provider. See OIDC spec. You must also prepare your Istio VirtualService to ensure that this URL will get routed to product page. | common.Endpoint |
| client_id | the OIDC client ID assigned to the filter. | string |
| client_secret | the OIDC client secret assigned to the filter. | string |
| scopes | optional additional scopes passed to the IdP during authenticating a user. The `openid` scope is always sent to the IdP so does not need to be specified. | (slice of) string |
| landing_page | the URL a browser is redirected to after successful authentication and token acquisition. | string |
| cryptor_secret | TODO: use [(validate.rules).string.uri_ref = true] when implemented for C/C++. a secret used to derive cryptographic material for protecting cookies and other data. | string |
| cookie_name_prefix | a unique identifier of the authservice's browser cookies. Can be any string. Only needed when multiple apps in the same domain are each protected by their own authservice, to avoid cookie name conflicts. | string |
| id_token | the configuration for forwarding `id_token`s to the mesh. | TokenConfig |
| access_token | the optional configuration for forwarding `access_token`s to the mesh. | TokenConfig |
| timeout | the timeout in seconds for performing an authentication with an IdP. | uint32 |



##### message `TokenConfig` (config/oidc/config.proto)

TokenConfig defines how an access token obtained through an OIDC flow is forwarded to downstream services as well as the cookie name it is included in when returned to a browser.  # Forward as a standard Authorization Bearer token. header: Authorization premable: Bearer

| Field | Description | Type |
| ----- | ----------- | ---- |
| header | the name of the http header in which to insert a token when forwarding to internal mesh services. For example `Authorization`. | string |
| preamble | any preamble to include in the header when forwarding a token. For example "Bearer" | string |



